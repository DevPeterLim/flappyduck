<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì¦ê¸°ëŠ” Flappy Bird ìŠ¤íƒ€ì¼ ê²Œì„">
    <meta name="author" content="Your Name">
    <meta name="theme-color" content="#4CAF50">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì›¹ í”Œë˜í”¼ë²„ë“œ">
    <title>ì›¹ í”Œë˜í”¼ë²„ë“œ</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- íŒŒë¹„ì½˜ (í•„ìš”ì‹œ ì¶”ê°€) -->
    <!-- <link rel="icon" type="image/png" href="assets/images/favicon.png"> -->
    
    <!-- ê¸°ë³¸ ë””ë²„ê·¸ ì˜¤ë¥˜ í•¸ë“¤ëŸ¬ ì„¤ì • -->
    <script>
        // ì „ì—­ ì˜¤ë¥˜ í•¸ë“¤ëŸ¬ ì„¤ì •
        window.addEventListener('error', function(e) {
            console.error('ì „ì—­ ì—ëŸ¬ ë°œìƒ:', e.error ? (e.error.stack || e.error.message) : e.message);
            
            // ë””ë²„ê·¸ UIì— ì˜¤ë¥˜ í‘œì‹œ
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = `ì˜¤ë¥˜: ${e.error ? e.error.message : e.message}`;
            errorDiv.style.position = 'fixed';
            errorDiv.style.top = '10px';
            errorDiv.style.left = '10px';
            errorDiv.style.backgroundColor = 'rgba(255,0,0,0.8)';
            errorDiv.style.color = 'white';
            errorDiv.style.padding = '10px';
            errorDiv.style.borderRadius = '5px';
            errorDiv.style.maxWidth = '80%';
            errorDiv.style.zIndex = '9999';
            document.body.appendChild(errorDiv);
            
            // 5ì´ˆ í›„ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê±°
            setTimeout(() => {
                document.body.removeChild(errorDiv);
            }, 5000);
        });
        
        // ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìƒíƒœ ì¶”ì 
        window.scriptLoadStatus = {
            loaded: {},
            errors: {},
            markLoaded: function(scriptName) {
                this.loaded[scriptName] = true;
                console.log(`ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨: ${scriptName}`);
            },
            markError: function(scriptName, error) {
                this.errors[scriptName] = error;
                console.error(`ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨: ${scriptName}`, error);
            },
            getStatus: function() {
                return {
                    loaded: {...this.loaded},
                    errors: {...this.errors}
                };
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <!-- ê²Œì„ íƒ€ì´í‹€ -->
        <h1 id="gameTitle">ì›¹ í”Œë˜í”¼ë²„ë“œ</h1>
        
        <!-- ê²Œì„ ìº”ë²„ìŠ¤ -->
        <canvas id="gameCanvas"></canvas>
        
        <!-- ê²Œì„ UI ìš”ì†Œ -->
        <div id="ui-layer">
            <div id="start-screen" class="screen">
                <button id="start-button">ê²Œì„ ì‹œì‘</button>
                <p class="instructions">ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” í´ë¦­/íƒ­ìœ¼ë¡œ ìƒˆë¥¼ ì í”„ì‹œí‚¤ì„¸ìš”</p>
            </div>
            <div id="game-over-screen" class="screen hidden">
                <h2>ê²Œì„ ì˜¤ë²„</h2>
                <p id="final-score">ì ìˆ˜: <span>0</span></p>
                <p id="high-score">ìµœê³  ì ìˆ˜: <span>0</span></p>
                <button id="restart-button">ë‹¤ì‹œ ì‹œì‘</button>
            </div>
            <div id="pause-screen" class="screen hidden">
                <h2>ì¼ì‹œì •ì§€</h2>
                <p>ESCë¥¼ ëˆŒëŸ¬ ê²Œì„ì„ ê³„ì†í•˜ì„¸ìš”</p>
            </div>
            <div id="score-display">0</div>
            <div id="audio-control" class="button">
                <span class="audio-on">ğŸ”Š</span>
                <span class="audio-off hidden">ğŸ”‡</span>
            </div>
            <div class="volume-control">
                <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="50">
            </div>
        </div>
    </div>
    
    <!-- ë””ë²„ê·¸ ì½˜ì†” (F2ë¡œ í† ê¸€) -->
    <div id="debug-console" class="hidden">
        <div id="debug-console-header">
            <div id="debug-console-title">ê²Œì„ ë””ë²„ê·¸ ì½˜ì†”</div>
            <div id="debug-console-controls">
                <button class="debug-button" id="debug-clear-button">ì§€ìš°ê¸°</button>
                <button class="debug-button" id="debug-close-button">ë‹«ê¸°</button>
                <button class="debug-button" id="debug-scripts-button">ìŠ¤í¬ë¦½íŠ¸ ìƒíƒœ</button>
            </div>
        </div>
        <div id="debug-log-container">
            <div id="debug-log-content"></div>
        </div>
        <div id="debug-status-bar">
            <div id="debug-current-state">ìƒíƒœ: ì´ˆê¸°í™” ì¤‘...</div>
            <div id="debug-fps">FPS: 0</div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìƒíƒœ ëª¨ë‹ˆí„°ë§ -->
    <script>
        function loadScript(src, name) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    window.scriptLoadStatus.markLoaded(name || src);
                    resolve();
                };
                script.onerror = (error) => {
                    window.scriptLoadStatus.markError(name || src, error);
                    reject(new Error(`ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨: ${src}`));
                };
                document.body.appendChild(script);
            });
        }
    </script>

    <!-- ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="js/utils/assetLoader.js" onerror="window.scriptLoadStatus.markError('assetLoader.js')" onload="window.scriptLoadStatus.markLoaded('assetLoader.js')"></script>
    <script src="js/utils/renderUtils.js" onerror="window.scriptLoadStatus.markError('renderUtils.js')" onload="window.scriptLoadStatus.markLoaded('renderUtils.js')"></script>
    <script src="js/utils/gameLoop.js" onerror="window.scriptLoadStatus.markError('gameLoop.js')" onload="window.scriptLoadStatus.markLoaded('gameLoop.js')"></script>
    
    <!-- ê²Œì„ í´ë˜ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="js/bird.js" onerror="window.scriptLoadStatus.markError('bird.js')" onload="window.scriptLoadStatus.markLoaded('bird.js')"></script>
    <script src="js/pipe.js" onerror="window.scriptLoadStatus.markError('pipe.js')" onload="window.scriptLoadStatus.markLoaded('pipe.js')"></script>
    <script src="js/pipeManager.js" onerror="window.scriptLoadStatus.markError('pipeManager.js')" onload="window.scriptLoadStatus.markLoaded('pipeManager.js')"></script>
    <script src="js/collisionSystem.js" onerror="window.scriptLoadStatus.markError('collisionSystem.js')" onload="window.scriptLoadStatus.markLoaded('collisionSystem.js')"></script>
    <script src="js/scoreSystem.js" onerror="window.scriptLoadStatus.markError('scoreSystem.js')" onload="window.scriptLoadStatus.markLoaded('scoreSystem.js')"></script>
    <script src="js/backgroundManager.js" onerror="window.scriptLoadStatus.markError('backgroundManager.js')" onload="window.scriptLoadStatus.markLoaded('backgroundManager.js')"></script>
    <script src="js/gameStateManager.js" onerror="window.scriptLoadStatus.markError('gameStateManager.js')" onload="window.scriptLoadStatus.markLoaded('gameStateManager.js')"></script>
    <script src="js/audioManager.js" onerror="window.scriptLoadStatus.markError('audioManager.js')" onload="window.scriptLoadStatus.markLoaded('audioManager.js')"></script>
    <script src="js/responsiveManager.js" onerror="window.scriptLoadStatus.markError('responsiveManager.js')" onload="window.scriptLoadStatus.markLoaded('responsiveManager.js')"></script>
    
    <!-- ë””ë²„ê·¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ë””ë²„ê·¸ ì½˜ì†” ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ë¡œë“œ ì™„ë£Œ, ë””ë²„ê·¸ ì½˜ì†” ì´ˆê¸°í™” ì‹œì‘');
            
            // ë””ë²„ê·¸ ë²„íŠ¼ í•¸ë“¤ëŸ¬
            const clearButton = document.getElementById('debug-clear-button');
            const closeButton = document.getElementById('debug-close-button');
            const scriptsButton = document.getElementById('debug-scripts-button');
            
            if (clearButton) {
                clearButton.addEventListener('click', function() {
                    if (window.GameDebug) {
                        window.GameDebug.clearLogs();
                    }
                });
            }
            
            if (closeButton) {
                closeButton.addEventListener('click', function() {
                    if (window.GameDebug) {
                        window.GameDebug.toggleConsole();
                    }
                });
            }
            
            if (scriptsButton) {
                scriptsButton.addEventListener('click', function() {
                    // ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìƒíƒœ ë¡œê·¸
                    console.log('ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìƒíƒœ:', window.scriptLoadStatus.getStatus());
                    
                    // ê²Œì„ ê°ì²´ í™•ì¸
                    console.log('ê²Œì„ ê°ì²´ ìƒíƒœ:', {
                        game: window.game ? 'ì¡´ì¬í•¨' : 'ì—†ìŒ',
                        GameStateManager: window.GameStateManager ? 'ì •ì˜ë¨' : 'ë¯¸ì •ì˜',
                        BackgroundManager: window.BackgroundManager ? 'ì •ì˜ë¨' : 'ë¯¸ì •ì˜',
                        Bird: window.Bird ? 'ì •ì˜ë¨' : 'ë¯¸ì •ì˜'
                    });
                    
                    if (window.GameDebug) {
                        window.GameDebug.log('ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìƒíƒœ', window.scriptLoadStatus.getStatus());
                    }
                    
                    // ì•Œë¦¼ í‘œì‹œ
                    const notification = document.createElement('div');
                    notification.className = 'debug-notification';
                    notification.textContent = 'ìŠ¤í¬ë¦½íŠ¸ ìƒíƒœ ë¡œê·¸ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤ (F12ë¡œ í™•ì¸)';
                    notification.style.position = 'fixed';
                    notification.style.bottom = '10px';
                    notification.style.left = '10px';
                    notification.style.backgroundColor = 'rgba(0,0,0,0.7)';
                    notification.style.color = 'white';
                    notification.style.padding = '10px';
                    notification.style.borderRadius = '5px';
                    notification.style.zIndex = '9999';
                    document.body.appendChild(notification);
                    
                    // 3ì´ˆ í›„ ì•Œë¦¼ ì œê±°
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 3000);
                });
            }
            
            // FPS ë° ìƒíƒœ ì—…ë°ì´íŠ¸
            function updateDebugStatus() {
                const stateElement = document.getElementById('debug-current-state');
                const fpsElement = document.getElementById('debug-fps');
                
                if (stateElement && window.GameDebug && window.GameDebug.getGameState) {
                    const gameState = window.GameDebug.getGameState();
                    stateElement.textContent = `ìƒíƒœ: ${typeof gameState === 'object' && gameState.currentState ? gameState.currentState : (gameState || 'ì•Œ ìˆ˜ ì—†ìŒ')}`;
                }
                
                if (fpsElement && window.game && window.game.getFPS) {
                    fpsElement.textContent = `FPS: ${Math.round(window.game.getFPS() || 0)}`;
                }
                
                requestAnimationFrame(updateDebugStatus);
            }
            
            updateDebugStatus();
            console.log('ë””ë²„ê·¸ ì½˜ì†” ì´ˆê¸°í™” ì™„ë£Œ');
        });
    </script>
    
    <!-- ë©”ì¸ ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="js/game.js" onerror="window.scriptLoadStatus.markError('game.js')" onload="window.scriptLoadStatus.markLoaded('game.js')"></script>
</body>
</html> 